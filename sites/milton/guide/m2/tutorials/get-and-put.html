<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
	<head>
		<title>GET and PUT</title>
	</head>
	<body>
		<p>
			We saw how to browse through the folders in the
			<a href="/guide/tutorials/hibernate/index.html">previous tutorial</a>
			. In this tutorial, we will see how to Upload and Download the documents to the folders.
		</p>
		<h2>Uploading the Document</h2>
		<p>
			A Resource can be uploaded using the PUT method. PUT method will create a new resource or it will overwrite if the resource already exists. Milton API Provides the PutableResource Interface which implements the PUT method. Please refer the
			<a href="/reference/milton-api/apidocs/com/bradmcevoy/http/PutableResource.html">JavaDoc</a>
			for more information on PutableResource
		</p>
		<p>
			<b>Important Methods of PutableResource Interface:</b>
			createNew(java.lang.String newName, java.io.InputStream inputStream, java.lang.Long length, java.lang.String contentType) :  Create a new resource, or overwrite an existing one
		</p>
		<p>
			<b>Example:</b>
			For example, we will build the abilities to build on top of the previous tutorial. Example uses the "Hibernate" to store the documents details and its contents. You need to implement "PutableResource" interface and then write logic to upload the document.
		</p>
		<p>
			<br />
			<script src="https://gist.github.com/1857703.js?file=milton_uploadresource_1.java" />
		</p>
		<h2>Downloading the Document</h2>
		<p>
			When download is requested by WebDAV client, it uses the GET method to get the content.  Milton provides the
			<a href="/reference/milton-api/apidocs/com/bradmcevoy/http/GetableResource.html">GetableResource</a>
			interface to serve the GET request. In order to make the document downloadable, we need to implement the GetableResource. All the classes which implement this interface need to implement the following methods.
		</p>
		<ul>
			<li>
				<u>
					<a href="/reference/milton-api/apidocs/com/bradmcevoy/http/GetableResource.html">getContentLength()</a>
				</u>
				-  The length of the content in this resource.
			</li>
			<li>
				<u>
					<a href="/reference/milton-api/apidocs/com/bradmcevoy/http/GetableResource.html">getContentType(java.lang.String accepts)</a>
				</u>
				- Given a comma separated listed of preferred content types acceptable for a client, return one content type which is the best.
			</li>
			<li>
				<u>
					<a href="/reference/milton-api/apidocs/com/bradmcevoy/http/GetableResource.html">sendContent(java.io.OutputStream out, Range range, java.util.Map</a>
				</u>
				- Send the resource's content using the given output stream.
			</li>
		</ul>
		<p>
			<br />
			Following code shows the implementation.
			<script src="https://gist.github.com/1857723.js?file=milton_downloadresource_1.java" />
			<br />
			You can download the working example
			<a href="https://github.com/ponns/Milton_Tutorials">here</a>
		</p>
		<h2>Output</h2>
		<p>
			Open the root folder. it will display all the departments as shown below
			<img width="761" height="265" alt="" src="/images/getput_output.jpg" />
		</p>
		<p>
			Now navigate to any department and drag&amp;drop the document of your choice. Thats all! The document is  uploaded.
			<img alt="" src="/images/getput_output_1.jpg" />
		</p>
		<p>you can double click the document to open it similar to opening a document in normal windows directory</p>
	</body>
</html>

