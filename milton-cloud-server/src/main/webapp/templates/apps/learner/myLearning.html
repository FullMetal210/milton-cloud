<html xmlns="http://www.w3.org/1999/xhtml">    <head>        <title>Untitled Document123</title>        <link rel="template" href="internal"/>        <link rel="stylesheet" type="text/css" href="learning.css" media="screen" />        <script type="text/javascript" src="jquery.pjax.js" >//</script>    </head>    <body class="course myLearning">        <!--contentLeft-->        <div class="contentLeft">            <div class="courcesBox">                 <a class="cources" href="#">Courses</a>                 <div class="role">                    <span>Change Program</span>                    <div class="dropBox1">                        <!-- Get a list of available programs -->                                                #set($programs = $rootFolder.child("programs").children)                        <ul class="list">                            #foreach($program in $programs)                            #set($firstCourse = false)                            #set($firstCourse = $program.children.first)                            #if($firstCourse)                            <li><a href="${firstCourse.path}">$program.title</a></li>                            #end                            #end                        </ul>                        <div class="accessBox">                            <div class="greyBox">                                 <a class="linkText" href="#">A</a>                                 <a class="linkText linkTxt" href="#">A</a>                                 <a class="circle" href="#"><img src="/templates/images/circle.gif" alt="" /></a>                                <div class="clr"></div>                            </div>                        </div>                    </div>                </div>            </div>            <!-- Check to see if parent is a program, in which case use that as current program -->            <!-- Otherwise, look in cookie -->            <!-- If also no cookie, then use main program from user -->            #set($cookieProgram = $formatter.percentDecode($request.cookies.currentProgram))            #if( $folder.is("program") )                 #set($curProgram = $folder)            #else                            #if( $cookieProgram )             #set($curProgram = $folder.host.find($cookieProgram))            #else            #foreach( $group in $user.groups)            #if( $group.hasValue("mainRole") )            #set($curProgram = $group.relations.mainRole)            #end            #end                                #if( !$curProgram )            #set($curProgram = $programs.first)            #end            #end                            #end            <div class="leftBar">                                #foreach($course in $curProgram.children)                <a class="programBox" href="${course.path}">                    <strong class="strongTxt">$course.title</strong>                    <small class="smllTxt">$course.numModules Modules  |  Total module learning time $formatter.formatMinsAsDuration($course.learningTimeMins)</small>                    <small class="p_Txt">$course.brief</small>                </a>                 #end                <div class="spacer"></div>            </div>        </div>        <!--contentLeftEnd-->        <!--contentRight-->        #if($targetPage.is("course"))        #set($course = $targetPage)                #else        #set($course = $curProgram.children.ofType.course.first)                #end        <div class="contentRight">            <div class="bar">                <div class="col1">                    <h3>$course.title modules</h3>                </div>                <div class="col2 col22"> <small>Progress</small> </div>                <div class="col2 col22"> <small>Assessment</small> </div>                <div class="col2 col22"> <small>Certificate</small> </div>                <div class="clr"></div>            </div>            <div class="tabularBox">                <!-- Show ALL of the modules for the selected course -->                #foreach($mod in $course.children.ofType.module)                #set($complete = "")                #if($mod.complete)                    #set($complete = "tick")                #end                #set($cert = false)                #set($certClass = "")                #set($cert = $status.child("cert.pdf"))                #if($cert)                #set($certClass = "downloadIcon")                #end                                #set($curPage = "")                #set($curPage = $mod.currentPage)                <div class="wBox">                     <a href="${mod.path}/$!{curPage}" class="description">                                                <span class="col1 row">                                                     <img src="${mod.thumb}" alt="" />                            $mod.title                        </span>                         <span class="col2 row">                            #if($mod.percentComplete)                            ${mod.percentComplete}%                            #else                            &nbsp;                            #end                        </span>                         <small class="col2 row">                            No Assessment Required                            <!--                            #if($status.params.complete)                            Finished                            #else                            #end                                                    -->                        </small>                         <span onclick="alert('download ${cert.url}'); return false;" class="col2 $certClass row">                            #if($cert)                            Download                            #else                            &nbsp;                            #end                           </span>                         <span class="row colLast">                            <strong class="infoIcon">i</strong>                        </span>                    </a>                    <div class="extraInfo">                        <small class="pTxt">$mod.brief</small>                        <small class="time">$formatter.formatMinsAsDuration($mod.learningTimeMins, true)</small>                         <span class="highlights">Highlights: $mod.highlights</span>                    </div>                    <span class="clr">.</span>                </div>                 #end                <div class="spacer"></div>                <script type="text/javascript">                                function storeCuProgramInCookie() {                        log("storeCurrentProgramInCookie", "${curProgram.url}");                        jQuery.cookie("currentProgram", "${curProgram.url}", {                            path: "/"                        });                                    }                                </script>            </div>          </div>        <!--contentRightEnd-->        <script type="text/javascript">                   jQuery(document).ready(function(){                log("document ready");                // Enable pjax page transitions                jQuery('a.programBox').pjax('.contentRight', {                    fragment: ".contentRight",                    success: function(x) {                        setActiveCourse();                        var programPath = getPathFromHref(getFolderPath(getFolderPath(window.location.href))) + "/";                        initPjax(programPath);                    }                });                jQuery('.role a').pjax('.content', {                    fragment: ".content",                    success: function() {                        var programPath = getPathFromHref(getFolderPath(getFolderPath(window.location.href))) + "/";                        initPjax(programPath);                    }                });                                initPjax("${curProgram.url}");            });            function initPjax(programPath) {                log("initPJax");                setActiveCourse();                // Store current course in a cookie                storeProgramCookie(programPath);            }            function storeProgramCookie(path) {                log("storeProgramCookie", path);                jQuery.cookie("currentProgram", path, {                    path: "/"                });                            }                             function setActiveCourse() {                jQuery("a.programBox").removeClass("active");                jQuery("a.programBox").each(function(i, node) {                    log("active?", window.location.pathname, $(node).attr("href"));                    if($(node).attr("href") == window.location.pathname) {                        $(node).addClass("active");                    }                });                                                }        </script>            </body></html>